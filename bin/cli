#!/usr/bin/env node

var createSignature = require('..');
var argv = process.argv;
var form_api_secret = argv[2];
var params = argv[3];

if (!form_api_secret)
  throw new Error('createSignature(); form_api_secret is required.');

console.log(typeof(params));
console.log(params);

if (params) {
  try {
    var options = JSON.parse(params);
  } catch (err) {
    throw new Error('JSON parse error, please check input');
  }
}

process.stdout.write(
  JSON.stringify(
    createSignature(form_api_secret, params ? options : null)
  )
);
